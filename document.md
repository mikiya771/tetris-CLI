# 開発方針

## 目的

- CLIでテトリスを作る

## 開発の流れ

開発の段階としては，
- 下調べ 懸念点(技術，技量的にできるかどうか)の消化
- 大まかな設計(ゲーム内容の分析と，ToDoにいく前の大枠設計)
- TDDで開発する(ToDoList, TestCode, Code)

## 下調べをする

今回は，Golangの開発に不慣れなので，不安点の解消から入る

- [x] GoでTestを書くことはできるか
    - [x] 実際にTestを書くことはできるかどうか，一個書いてみて確認する
- [x] GoでのCUIツール
    - [x] 画面への表示はできるか
    - [x] 画面上に再表示することはできるか(ゲーム画面としての働きをできるかどうか)
    - [x] 入力を受け付けてゲーム画面の更新を行うことができるか

## 大まかな設計

ゲームの概要の文章にする．
その後，全ての登場人物(プレイヤー，テトリミノなど)を上げて，そこに付随する機能や制限を言語化していく

### テトリスとは

> 「上から落ちてくる『４個の正方形で構成された７種類の多角形ブロック』（テトリミノ tetrimino）を操作して、
> 埋まった横列のみが消えるのを利用してテニス（tennis）のラリーのようにひたすら消し続けていく」
>
> ([テトリスとは (テトリスとは) \[単語記事\] - ニコニコ大百科](https://dic.nicovideo.jp/a/テトリス) より)

### テトリスにおける登場人物

- プレイヤー
- 現在の状態をユーザーに表示するディスプレイ
- ユーザーが使用するキーボード
- アクティブな(=ユーザーが操作可能な)テトリミノ
- 非アクティブな(=すでにユーザー操作を離れた)テトリミノたち(以降では，"つまれたテトリミノの塊")
- テトリミノが存在可能な範囲としての枠
- 次に使用されるテトリミノ
- 次に使用されるテトリミノが表示される枠
- テトリミノのアクティブ，非アクティブを変換するためのロジック
- つまれたテトリミノの塊のうち，横列が埋まっていないかを確認するロジック
- ユーザーの入力を受けるもしくはルールを入れることで，テトリミノの位置情報を書き換えるロジック
- 得点を計算するロジック

### テトリスのドメインルール

- テトリミノは枠の外に出ることはない
- テトリミノはその時点での底をなす部分(要議論)に接触して，n秒後に非アクティブになる
- テトリミノはアクティブであれば，m秒後に一個したに落ちようとする．
- ゲームエンドは枠の上限にテトリミノが達した時である
- テトリミノの出現ルールは，七種一巡を採用する

### ゲームシステムからみた登場人物の関連性

1. テトリミノおよびステージなどの情報
2. ユーザーにむけたDisplay
3. ユーザーによるinput もしくは 時間経過によるinput
4. テトリミノおよびステージのロジックに基づいた更新もしくは終了

というループでゲームが進行していく．
